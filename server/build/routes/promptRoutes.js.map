{"version":3,"sources":["../../app/routes/promptRoutes.js"],"names":[],"mappings":"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","file":"promptRoutes.js","sourcesContent":["function shuffle(array) {\n    var counter = array.length;\n    // While there are elements in the array\n    while (counter > 0) {\n        // Pick a random index\n        var index = Math.floor(Math.random() * counter);\n        // Decrease counter by 1\n        counter--;\n        // And swap the last element with it\n        var temp = array[counter];\n        array[counter] = array[index];\n        array[index] = temp;\n    }\n    return array;\n}\n\n// Route used during examinations\nexports.queryAllPrompts = function(Prompt) {\n  return function(req, res, next) {\n    Prompt.find({}, function(err, prompts) {\n      if(err) return console.error(err);\n      var promptsShuffled = shuffle(prompts);\n      console.log(promptsShuffled);\n      res.json( promptsShuffled );\n    });\n  };\n};\n\n// Route used for Admin dashboard\nexports.queryAllPromptsList = function(Prompt) {\n  var results = {};\n  return function(req, res, next) {\n    Prompt.find({}, function(err, prompts) {\n      if(err) return console.error(err);\n      var editObj = {};\n\n      for(var key in prompts) {\n          if(prompts.hasOwnProperty(key)) {\n            editObj[prompts[key]._id] = {\n              mode: null,\n              data: prompts[key].question\n            };\n          }\n      }\n      results = {\n        prompts,\n        editObj\n      }\n      res.json( results );\n    });\n  };\n};\nexports.addPrompt = function(Prompt){\n  return function(req, res, next){\n    Prompt.findOne({ question: req.body.question }, function(err, prompt) {\n      if(err) return console.error(err);\n      if (prompt) {\n        return res.json( {success: false, message: 'This prompt already exists!'} );\n      } else {\n        var prompt = new Prompt({\n          question : req.body.question\n        });\n        prompt.save(function(err, prompt){\n          if(err) return console.error(err);\n          res.json(prompt);\n        });\n      }\n    });\n  };\n};\nexports.editPrompt = function(Prompt){\n  var results = {};\n  return function(req, res, next){\n    console.log(req.body);\n    Prompt.findOne({ _id: req.body.id }, function(err, prompt) {\n      prompt.question = req.body.question;\n      console.log(prompt.question);\n      prompt.save(function(err, prompt){\n        if(err) {\n          return console.error(err)\n        } else {\n          Prompt.find({}, function(err, prompts) {\n            if(err) return console.error(err);\n            var editObj = {};\n\n            for(var key in prompts) {\n                if(prompts.hasOwnProperty(key)) {\n                  editObj[prompts[key]._id] = {\n                    mode: null,\n                    data: prompts[key].question\n                  };\n                }\n            }\n            results = {\n              prompts,\n              editObj\n            }\n            res.json( results );\n          });       \n        }\n\n      });\n    });\n  };\n};\nexports.deletePrompt = function(Prompt){\n  var results = {};\n  return function(req, res, next){\n    Prompt.remove({ _id: req.body.promptId }, function(err) {\n      if (err) {\n        return console.error(err)\n      } else {\n        Prompt.find({}, function(err, prompts) {\n          if(err) return console.error(err);\n          var editObj = {};\n\n          for(var key in prompts) {\n              if(prompts.hasOwnProperty(key)) {\n                editObj[prompts[key]._id] = {\n                  mode: null,\n                  data: prompts[key].question\n                };\n              }\n          }\n          results = {\n            prompts,\n            editObj\n          }\n          res.json( results );\n        });\n      }\n    });\n  };\n};\n\n"]}